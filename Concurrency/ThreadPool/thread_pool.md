# Java 线程池简介

在 Web 开发中，服务器需要接受并处理请求，所以会为一个请求来分配一个线程来进行处理。如果每次请求都新创建一个线程的话实现起来非常简便，但是存在问题：

如果并发的请求数量非常多，但每个线程执行的时间很短，这样就会频繁的创建和销毁线程，如此一来会大大降低系统的效率。可能出现服务器在为每个请求创建新线程和销毁线程上花费的时间和消耗的系统资源要比处理实际的用户请求的时间和资源更多。

那么有没有一种办法使执行完一个任务，并不被销毁，而是可以继续执行其他的任务呢？

这就是线程池的目的了。线程池为线程生命周期的开销和资源不足问题提供了解决方案。**通过对多个任务重用线程，线程创建的开销被分摊到了多个任务上**。

什么时候使用线程池？

- 单个任务处理时间比较短

- 需要处理的任务数量很大

使用线程池的好处？

- 降低资源消耗。通过重复利用已创建的线程降低线程创建和销毁造成的消耗。

- 提高响应速度。当任务到达时，任务可以不需要的等到线程创建就能立即执行。

- 提高线程的可管理性。线程是稀缺资源，如果无限制的创建，不仅会消耗系统资源，还会降低系统的稳定性，使用线程池可以进行统一的分配，调优和监控。

Java 中的线程池是用`ThreadPoolExecutor`类来实现的，本文结合 JDK 1.8 类源码来分析一下这个类内部对于线程的创建, 管理以及后台任务的调度等方面的执行原理。

![Concurrency-ThreadPool-1][Concurrency-ThreadPool-1]

> 图：`ThreadPoolExecutor`类图

# Executor 接口

...


[Concurrency-ThreadPool-1]: ../../images/Concurrency-ThreadPool-1.jpg

<!-- EOF -->
